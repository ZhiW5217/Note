# djangoè·¯ç”±ç®¡ç†

- æ™®é€šè·¯ç”±
- å‚æ•°è·¯ç”±
- æ­£åˆ™è·¯ç”±
- æ­£åˆ™å‚æ•°è·¯ç”±
- åˆ†å¸ƒå¼è·¯ç”±

## è·¯ç”±çš„å®šä¹‰

æ‰€æœ‰çš„è·¯ç”±ï¼Œéƒ½å¿…é¡»åœ¨è·¯ç”±ç®¡ç†å™¨ urls.py urlpatterns åˆ—è¡¨ä¸­

åœ¨ urlpatterns ä¸­ï¼Œé€šè¿‡å®šä¹‰ è·¯ç”± å¯ä»¥ä½¿ç”¨path å‡½æ•°

```js
from django.usrls import path

path(route, view, kwargs, name)
```
- route  : å®šä¹‰è·¯ç”±çš„åœ°å€ï¼Œæ˜¯ä¸€ä¸ª å­—ç¬¦ä¸² ï¼Œä¸èƒ½ä¸€ / å¼€å¤´
- view   : è§†å›¾å‡½æ•°ï¼Œæ˜¯ç”± pythonçš„å‡½æ•°æ¥å……å½“çš„
- kwargs : æ˜¯ä¸€ä¸ªå­—å…¸æ ¼å¼çš„æ•°æ®ï¼Œæ˜¯ç»™è§†å›¾å‡½æ•°è®¾ç½®é¢å¤–çš„å‚æ•°ï¼Œä¸å¸¸ç”¨
- name   : å®šä¹‰è·¯ç”±çš„å¯¹åº”çš„åç§°ï¼Œé€šè¿‡è·¯ç”±åç§°è¿›è¡Œè·¯ç”±çš„åå‘è§£æ

```js
# è·¯ç”±è§†å›¾å‡½æ•°çš„å®šä¹‰
	 è§†å›¾å‡½æ•°å	æ¥å—æµè§ˆå™¨çš„è¯·æ±‚
        ğŸ‘‡ 	 		ğŸ‘‡
def  index(      request   ):

	return HttpResponse("è¿”å›è§†å›¾å†…å®¹")



ur;patterns = [
	path("è·¯ç”±åœ°å€",è§†å›¾å‡½æ•°,kwargs=""(å¯ä»¥å¿½ç•¥ä¸ä¼ ),name="è·¯ç”±åç§°"),
	
]

```

## æ™®é€šè·¯ç”±

- æ™®é€šè·¯ç”±é€šè¿‡ path æ¥å®šä¹‰ï¼Œrouteæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²

## å‚æ•°è·¯ç”±

- å‚æ•°è·¯ç”±é€šè¿‡ path æ¥å®šä¹‰ï¼Œroute ä¸­åŒ…å« `<key>` æˆ–è€… `<type:key>` å ä½ç¬¦

### typeå¸¸è§çš„ç±»å‹

- *str  : é»˜è®¤å€¼, strå¯ä»¥åŒ¹é…é™¤æ–œæ  `/` ä¹‹å¤–çš„å¤šæœ‰å­—ç¬¦
- *int  : ä¼šå°†ä¼ å…¥çš„å€¼è‡ªåŠ¨è½¬ä¸º int ç±»å‹
- slug : å¯ä»¥åŒ¹é… æœ‰ æ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿ï¼Œå’Œä¸­åˆ’çº¿ ç»„æˆçš„å­—ç¬¦ä¸²
- path : é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦
- uuid : åŒ¹é…UUIDæ ¼å¼çš„å­—ç¬¦ä¸²

```js
				 æ¥æ”¶å®šä¹‰çš„å‚æ•°åå­—
						ğŸ‘‡
def detail(request,		  pk   ):
    return HttpResponse(f"è¯¦æƒ…é¡µ{pk}")

ur;patterns = [
	
				 å‚æ•°ç±»å‹	  å‚æ•°åå­—
				    ğŸ‘‡		    ğŸ‘‡	
	path('detail<    path    :    pk    >',detail,name="detail"),
]
```
### è‡ªå®šä¹‰å‚æ•°è·¯ç”±ä¸­çš„å‚æ•°è½¬æ¢å™¨

django å†…ç½®çš„æ‰€æœ‰ç±»å‹è½¬æ¢å™¨ éƒ½åœ¨`converters.py`ä¸­,å¯ä»¥é€šè¿‡Ctrl + N è¿›è¡Œæœç´¢

- 1. åœ¨ djangoçš„æ ¸å¿ƒåŒ…ä¸‹ã€æ–°å»ºä¸€ä¸ª converters.py (åå­—ä¸æ˜¯å›ºå®šçš„ã€çº¦å®šä¿—æˆ), ä»£ç å¦‚ä¸‹

```js
class YearConverter:
    regex = r'(19|20)\d{2}'

    def to_python(self, value):
        return int(value)

    def to_url(self, value):
        return str(value)

```

- 2. å°†è‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢å™¨æ³¨å†Œåˆ° djangoä¸­

```js
æ‰“å¼€ djangoé¡¹ç›®çš„æ ¸å¿ƒåŒ…ä¸­çš„ __init__.py  å®Œæˆè‡ªå®šä¹‰æ³¨å†Œ

										æ³¨å†Œå‡½æ•°
										   ğŸ‘‡
	from django.urls.converters import register_converter
						
						
						  è‡ªå®šä¹‰å‡½æ•°
						     ğŸ‘‡
	from .converters import YearConverter

# æ³¨å†Œè‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢å™¨
								ä½¿ç”¨çš„åå­—
									ğŸ‘‡
register_converter(YearConverter, "yyyy")


```

- 3. åœ¨ å‚æ•°è·¯ç”±ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„ yyyy è½¬æ¢å™¨

```js
urlpatterns = [
    ...
    path("query/<yyyy:year>", query, name="query")

]

```

## æ­£åˆ™è·¯ç”±

æ­£åˆ™è·¯ç”±ä½¿ç”¨çš„å‡½æ•°æ˜¯ url æˆ–è€… re_path å‡½æ•°ï¼Œå…·ä½“ç”¨æ³•å‚è€ƒ path å‡½æ•°

```js
urlåœ¨ï¼š
from django.conf.urls import url,re_path

urlpatterns = [
	...
	url('^$',index,name="index"),
	
	url('^user/',user),

]

```

## æ­£åˆ™å‚æ•°è·¯ç”±

```js
(?P<key>regex)


key : ä»£è¡¨å ä½ç¬¦

regex : åŒ¹é…å ä½ç¬¦å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼

urlpatterns = [
	...
	
	url('^detail/(?P<px>\d+)',detail,name="detail"),
]

```





















